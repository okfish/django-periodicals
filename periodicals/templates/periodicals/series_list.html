{% extends "3column_with_menu.html" %}
{% load i18n %}
{% block title %}{{block.super}} - {{periodical.name}} - All Article Series{% endblock %}

{% block meta %}
{{block.super}}
<meta name="Description" content="{% trans "View all series for all periodicals in the database." %}">
{% endblock %}

{% block link %}
{{block.super}}
<link rel="stylesheet" href="http://data.agilitynerd.com/js/jquery/themes/redmond/jquery-ui-1.7.2.custom.css" type="text/css" media="screen"/>
<link rel="stylesheet" type="text/css" media="screen" href="http://data.agilitynerd.com/js/jquery/jqGrid-3.5.3/css/ui.jqgrid.css"/>
{% endblock %}


{% block javascript %}
<script src="http://data.agilitynerd.com/js/jquery/jqGrid-3.5.3/js/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="http://data.agilitynerd.com/js/jquery/jqGrid-3.5.3/js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="http://data.agilitynerd.com/js/jquery/jqGrid-3.5.3/js/jquery.jqGrid.min.js" type="text/javascript"></script>
<script type="text/javascript">
jQuery(document).ready(function(){

var grid=jQuery("#series-grid").jqGrid({ datatype: "local",
height: 550,
colNames:['Series Name','# Articles'],
colModel:[ {name:'name',index:'name',sorttype:'text'},
           {name:'count',index:'count',sorttype:'int',align:'right'}
         ],
	 autowidth:true,
	 gridview:true,
         viewsortcols: true,
onSelectRow:function(id){
var url = jQuery("#"+id+" td a").attr('href');
if (url){
    document.body.style.cursor = "wait"
    window.location = url;
}
}
});

var mydata = [
{% for series in object_list %}
{
 name:'<a title="Click to view articles" href="{% url periodicals_series_detail periodical.slug,series.series|urlencode %}">{{series.series}}</a>',
 count:'{{series.series_count}}'
},
{% endfor %}
];

for(var i=0;i<=mydata.length;i++){
 grid.addRowData(i+1,mydata[i]);
}
});
</script>
{% endblock %}

{% block content %}
{% spaceless %}
<div class="breadcrumbs"><a href="/">Home</a>&nbsp;>&nbsp;<a href="{% url periodicals_list %}">Periodicals</a>&nbsp;>&nbsp;<a href="{{periodical.get_absolute_url}}">{{periodical.name}}</a>&nbsp;>&nbsp;All Article Series</div>
<!-- google_ad_section_start -->
<h1>All Article Series</h1>
<p>Click column titles to sort. Click on a row to view all articles in that series.</p>
<table id="series-grid" class="scroll" cellpadding="0" cellspacing="0"></table>
{% load periodicals_tags %}
<div class="copyright">{{periodical|periodical_copyright}}</div>
<!-- google_ad_section_end -->
{% endspaceless %}
{% endblock %}
